import getCompositeRect from"./dom-utils/getCompositeRect.js";import getLayoutRect from"./dom-utils/getLayoutRect.js";import listScrollParents from"./dom-utils/listScrollParents.js";import getOffsetParent from"./dom-utils/getOffsetParent.js";import getComputedStyle from"./dom-utils/getComputedStyle.js";import orderModifiers from"./utils/orderModifiers.js";import debounce from"./utils/debounce.js";import validateModifiers from"./utils/validateModifiers.js";import uniqueBy from"./utils/uniqueBy.js";import getBasePlacement from"./utils/getBasePlacement.js";import mergeByName from"./utils/mergeByName.js";import detectOverflow from"./utils/detectOverflow.js";import{isElement}from"./dom-utils/instanceOf.js";import{auto}from"./enums.js";export*from"./enums.js";var INVALID_ELEMENT_ERROR="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.",INFINITE_LOOP_ERROR="Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.",DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}export function popperGenerator(e){void 0===e&&(e={});var t=e,r=t.defaultModifiers,o=void 0===r?[]:r,i=t.defaultOptions,n=void 0===i?DEFAULT_OPTIONS:i;return function(e,t,r){void 0===r&&(r=n);var i={placement:"bottom",orderedModifiers:[],options:Object.assign(Object.assign({},DEFAULT_OPTIONS),n),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},s=[],a=!1,f={state:i,setOptions:function(r){m(),i.options=Object.assign(Object.assign(Object.assign({},n),i.options),r),i.scrollParents={reference:isElement(e)?listScrollParents(e):e.contextElement?listScrollParents(e.contextElement):[],popper:listScrollParents(t)};var a=orderModifiers(mergeByName([].concat(o,i.options.modifiers)));return i.orderedModifiers=a.filter(function(e){return e.enabled}),i.orderedModifiers.forEach(function(e){var t=e.name,r=e.options,o=void 0===r?{}:r,n=e.effect;if("function"==typeof n){var a=n({state:i,name:t,instance:f,options:o});s.push(a||function(){})}}),f.update()},forceUpdate:function(){if(!a){var e=i.elements,t=e.reference,r=e.popper;if(areValidElements(t,r)){i.rects={reference:getCompositeRect(t,getOffsetParent(r),"fixed"===i.options.strategy),popper:getLayoutRect(r)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach(function(e){return i.modifiersData[e.name]=Object.assign({},e.data)});for(var o=0;o<i.orderedModifiers.length;o++)if(!0!==i.reset){var n=i.orderedModifiers[o],s=n.fn,m=n.options,p=void 0===m?{}:m,c=n.name;"function"==typeof s&&(i=s({state:i,options:p,name:c,instance:f})||i)}else i.reset=!1,o=-1}}},update:debounce(function(){return new Promise(function(e){f.forceUpdate(),e(i)})}),destroy:function(){m(),a=!0}};if(!areValidElements(e,t))return f;function m(){s.forEach(function(e){return e()}),s=[]}return f.setOptions(r).then(function(e){!a&&r.onFirstUpdate&&r.onFirstUpdate(e)}),f}};export var createPopper=popperGenerator();export{detectOverflow};