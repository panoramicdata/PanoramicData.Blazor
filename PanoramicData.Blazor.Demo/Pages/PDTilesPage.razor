@page "/pdtiles"
@using PanoramicData.Blazor.Models
@using PanoramicData.Blazor.Models.Tiles

<h1>PDTiles</h1>

<p>
	An isometric tile grid component for displaying connected tiles with logos.
	Pure Blazor implementation with animated connectors and SVG rendering.
</p>

<DemoSourceView SourceFiles="Pages/PDTilesPage.razor, Pages/PDTilesPage.razor.cs">

	<h3>Grid Options</h3>

	<PDToolbar ButtonSize="ButtonSizes.Small">
		<PDToolbarDropdown Text="@($"{_options.Columns}")" Items="@CreateMenuItems([1, 2, 3, 4, 5])" Click="OnColumnsSelected" ToolTip="Columns" />
		<PDToolbarPlaceholder><span class="small mx-1">&times;</span></PDToolbarPlaceholder>
		<PDToolbarDropdown Text="@($"{_options.Rows}")" Items="@CreateMenuItems([1, 2, 3, 4, 5])" Click="OnRowsSelected" ToolTip="Rows" />
		<PDToolbarDropdown Text="@($"D:{_options.Depth}%")" Items="@CreateMenuItems([1, 5, 10, 15, 20, 25])" Click="OnDepthSelected" ToolTip="Depth %" />
		<PDToolbarDropdown Text="@($"Gap:{_options.Gap}%")" Items="@CreateMenuItems([0, 25, 50, 75, 100, 150, 200, 250, 300])" Click="OnGapSelected" ToolTip="Gap %" />
		<PDToolbarDropdown Text="@($"Pop:{_options.Population}%")" Items="@CreateMenuItems([50, 60, 70, 80, 90, 100])" Click="OnPopulationSelected" ToolTip="Population %" />
		<PDToolbarButton Key="Shuffle" Text="Shuffle" CssClass="btn-secondary" Click="OnShuffle" />
		<PDToolbarSeparator />
		<PDToolbarDropdown Text="@($"Logo:{_options.LogoSize}%")" Items="@CreateMenuItems([60, 65, 70, 75, 80, 85, 90, 95, 100])" Click="OnLogoSizeSelected" ToolTip="Logo Size %" />
		<PDToolbarButton Key="RotL" Text="?" CssClass="btn-outline-secondary" Click="() => OnRotateLogo(-45)" ToolTip="Rotate Left" />
		<PDToolbarButton Key="RotR" Text="?" CssClass="btn-outline-secondary" Click="() => OnRotateLogo(45)" ToolTip="Rotate Right" />
		<PDToolbarPlaceholder><span class="text-muted small">(@(_options.LogoRotation)°)</span></PDToolbarPlaceholder>
		<PDToolbarSeparator />
		<PDToolbarPlaceholder>
			<span class="me-1 small">Tile:</span>
			<input type="color" class="form-control form-control-color p-0" style="width:28px;height:24px;" @bind="_options.TileColor" @bind:after="OnOptionsChanged" />
		</PDToolbarPlaceholder>
		<PDToolbarPlaceholder>
			<span class="me-1 small">BG:</span>
			<input type="color" class="form-control form-control-color p-0" style="width:28px;height:24px;" @bind="_options.BackgroundColor" @bind:after="OnOptionsChanged" />
		</PDToolbarPlaceholder>
		<PDToolbarDropdown Text="@($"Lines:{_options.LineOpacity}%")" Items="@CreateMenuItems([0, 5, 10, 15, 20, 25, 50, 75, 100])" Click="OnLineOpacitySelected" ToolTip="Line Opacity %" />
		<PDToolbarPlaceholder>
			<input type="color" class="form-control form-control-color p-0" style="width:28px;height:24px;" @bind="_options.LineColor" @bind:after="OnOptionsChanged" />
		</PDToolbarPlaceholder>
	</PDToolbar>

	<PDToolbar ButtonSize="ButtonSizes.Small">
		<PDToolbarDropdown Text="@($"Glow:{_options.Glow}%")" Items="@CreateMenuItems([0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100])" Click="OnGlowSelected" ToolTip="Glow Intensity %" />
		<PDToolbarDropdown Text="@($"GlowR:{_options.GlowFalloff}%")" Items="@CreateMenuItems([100, 150, 200, 250, 300, 400, 500])" Click="OnGlowFalloffSelected" ToolTip="Glow Falloff Radius %" />
		<PDToolbarDropdown Text="@($"Persp:{_options.Perspective}%")" Items="@CreateMenuItems([0, 5, 10, 15, 20, 25, 30])" Click="OnPerspectiveSelected" ToolTip="Perspective %" />
		<PDToolbarDropdown Text="@($"Refl:{_options.Reflection}%")" Items="@CreateMenuItems([0, 25, 50, 75, 100])" Click="OnReflectionSelected" ToolTip="Reflection %" />
		<PDToolbarDropdown Text="@($"RD:{_options.ReflectionDepth}%")" Items="@CreateMenuItems([50, 75, 100, 150, 200, 300])" Click="OnReflectionDepthSelected" ToolTip="Reflection Depth %" />
		<PDToolbarSeparator />
		<PDToolbarDropdown Text="@($"Scale:{_options.Scale}%")" Items="@CreateMenuItems([30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 150])" Click="OnScaleSelected" ToolTip="Scale %" />
		<PDToolbarDropdown Text="@($"Pad:{_options.Padding}%")" Items="@CreateMenuItems([0, 5, 10, 15, 20, 25, 50])" Click="OnPaddingSelected" ToolTip="Padding %" />
		<PDToolbarDropdown Text="@GetAlignmentShortText()" Items="@_alignmentItems" Click="OnAlignmentSelected" ToolTip="Alignment" />
		<PDToggleSwitch @bind-Value="_showChildContent" @bind-Value:after="OnOptionsChanged" Label="Content" />
		<PDToggleSwitch @bind-Value="_options.ShowBackground" @bind-Value:after="OnOptionsChanged" Label="BG" />
	</PDToolbar>

	<h3 class="mt-3">Connector Options</h3>

	<PDToolbar ButtonSize="ButtonSizes.Small">
		<PDToolbarButton Key="Random" Text="Random" CssClass="btn-secondary" Click="OnRandomizeConnectors" />
		<PDToolbarButton Key="Clear" Text="Clear" CssClass="btn-outline-secondary" Click="OnClearConnectors" />
		<PDToolbarSeparator />
		<PDToolbarDropdown Text="@($"Pat:{_connectorOptions.FillPattern}")" Items="@_patternItems" Click="OnPatternSelected" ToolTip="Fill Pattern" />
		<PDToolbarDropdown Text="@($"Dir:{GetDirectionShortText()}")" Items="@_directionItems" Click="OnDirectionSelected" ToolTip="Direction" />
		<PDToolbarDropdown Text="@($"N:{_connectorOptions.PerEdge?.ToString() ?? "Rnd"}")" Items="@_perEdgeItems" Click="OnPerEdgeSelected" ToolTip="Per Edge" />
		<PDToolbarDropdown Text="@($"Pop:{_connectorOptions.Population}%")" Items="@CreateMenuItems([25, 50, 75, 100])" Click="OnConnectorPopSelected" ToolTip="Population %" />
		<PDToolbarDropdown Text="@($"H:{_connectorOptions.Height}%")" Items="@CreateMenuItems([10, 20, 30, 40, 50, 60, 70, 80, 90, 100])" Click="OnConnectorHeightSelected" ToolTip="Height %" />
		<PDToolbarDropdown Text="@($"V:{GetVerticalAlignShortText()}")" Items="@_verticalAlignItems" Click="OnVerticalAlignSelected" ToolTip="Vertical Align" />
		<PDToolbarDropdown Text="@($"Op:{_connectorOptions.Opacity}%")" Items="@CreateMenuItems([25, 50, 80, 100])" Click="OnConnectorOpacitySelected" ToolTip="Opacity %" />
		<PDToolbarDropdown Text="@($"Anim:{GetAnimSpeedText()}")" Items="@_animSpeedItems" Click="OnAnimSpeedSelected" ToolTip="Animation Speed" />
	</PDToolbar>

	<div class="mt-2 p-2 border rounded">
		<strong>Last Event:</strong>
		@if (!string.IsNullOrEmpty(_lastEventIcon))
		{
			<i class="@_lastEventIcon me-1"></i>
		}
		@_lastEvent
	</div>

	<div class="border rounded mt-2" style="@(_options.ShowBackground ? $"background-color: {_options.BackgroundColor};" : "") overflow: hidden; resize: vertical; min-height: 300px; height: 500px;">
		<PDTiles @ref="_tilesComponent"
				 Options="_options"
				 ConnectorOptions="_connectorOptions"
				 Connectors="_connectors"
				 Logos="_logos"
				 Height="100%"
				 TileClick="OnTileClick"
				 ConnectorClick="OnConnectorClick">
			@if (_showChildContent)
			{
				<div class="pd-tiles-child-content">
					<h1>Magic Suite 2026</h1>

					<h2>Enterprise Integration</h2>
					<p>
						Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor
						incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
						exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
					</p>

					<h2>Data Transformation</h2>
					<p>
						Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque
						laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis.
					</p>

					<h2>Automation Workflows</h2>
					<p>
						At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium
						voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint.
					</p>

					<h2>Monitoring & Alerts</h2>
					<p>
						Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum
						soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat.
					</p>
				</div>
			}
		</PDTiles>
	</div>

</DemoSourceView>

<style>
	.pd-tiles-child-content {
		position: absolute;
		top: 0;
		left: 0;
		width: 50%;
		height: 100%;
		padding: 2rem;
		overflow: auto;
		color: white;
		text-shadow: 0 2px 4px rgba(0,0,0,0.8);
		pointer-events: auto;
	}
	.pd-tiles-child-content h1 {
		font-size: 2.5rem;
		margin-bottom: 1rem;
	}
	.pd-tiles-child-content h2 {
		font-size: 1.5rem;
		color: #4a9eff;
		margin-top: 1.5rem;
	}
	.pd-tiles-child-content p {
		line-height: 1.8;
	}
</style>
