@page "/pdcolorpicker"
@using PanoramicData.Blazor.Models.ColorPicker

<h1>PDColorPicker</h1>

<p>
	A comprehensive color picker component with support for multiple color modes (RGB, RGBA, HSV, HSL, Hex),
	various color space selectors, optional palettes, and recent colors.
</p>

<DemoSourceView SourceFiles="Pages/PDColorPickerPage.razor, Pages/PDColorPickerPage.razor.cs">

	<h3>Basic Usage</h3>

	<PDToolbar>
	<PDColorPicker @bind-Value="_color1"
		Text="Pick Color"
		ToolTip="Select a color" />
		<PDToolbarPlaceholder>
			<span class="ms-2">Selected: <code>@_color1</code></span>
		</PDToolbarPlaceholder>
	</PDToolbar>

	<div class="mt-3 p-3 rounded" style="background-color: @_color1; height: 60px;"></div>

	<h3 class="mt-4">With Palette</h3>

	<PDToolbar>
	<PDColorPicker @bind-Value="_color2"
		Text="Material Colors"
		Palette="@ColorPalettes.Material"
		Options="@_paletteOptions"
		ToolTip="Pick from Material palette" />
		<PDToolbarPlaceholder>
			<span class="ms-2">Selected: <code>@_color2</code></span>
		</PDToolbarPlaceholder>
	</PDToolbar>

	<div class="mt-3 p-3 rounded" style="background-color: @_color2; height: 60px;"></div>

	<h3 class="mt-4">With Transparency</h3>

	<PDToolbar>
	<PDColorPicker @bind-Value="_color3"
		Text="RGBA Color"
		Options="@_transparencyOptions"
		ToolTip="Color with alpha" />
		<PDToolbarPlaceholder>
			<span class="ms-2">Selected: <code>@_color3</code></span>
		</PDToolbarPlaceholder>
	</PDToolbar>

	<div class="mt-3 p-3 rounded position-relative" style="height: 60px; background-image: linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%); background-size: 20px 20px; background-position: 0 0, 0 10px, 10px -10px, -10px 0px;">
		<div class="position-absolute" style="inset: 0; background-color: @_color3;"></div>
	</div>

	<h3 class="mt-4">With Recent Colors</h3>

	<PDToolbar>
	<PDColorPicker @bind-Value="_color4"
		Text="With History"
		Palette="@ColorPalettes.Basic"
		RecentColors="@_recentColors"
		RecentColorsChanged="@OnRecentColorsChanged"
		Options="@_recentOptions"
		ToolTip="Tracks recent colors" />
		<PDToolbarPlaceholder>
			<span class="ms-2">Selected: <code>@_color4</code></span>
		</PDToolbarPlaceholder>
	</PDToolbar>

	<div class="mt-3 p-3 rounded" style="background-color: @_color4; height: 60px;"></div>

	@if (_recentColors.Count > 0)
	{
		<div class="mt-2">
			<strong>Recent Colors:</strong>
			@foreach (var color in _recentColors)
			{
				<span class="d-inline-block me-1" style="width: 20px; height: 20px; background-color: @color; border: 1px solid #ccc; border-radius: 3px;" title="@color"></span>
			}
		</div>
	}

	<h3 class="mt-4">RGB Sliders Mode</h3>

	<PDToolbar>
	<PDColorPicker @bind-Value="_color5"
		Text="RGB Sliders"
		Options="@_slidersOptions"
		ToolTip="Adjust with sliders" />
		<PDToolbarPlaceholder>
			<span class="ms-2">Selected: <code>@_color5</code></span>
		</PDToolbarPlaceholder>
	</PDToolbar>

	<div class="mt-3 p-3 rounded" style="background-color: @_color5; height: 60px;"></div>

	<h3 class="mt-4">HSV Mode</h3>

	<PDToolbar>
	<PDColorPicker @bind-Value="_colorHsv"
		Text="HSV"
		Options="@_hsvOptions"
		ToolTip="HSV color selection" />
		<PDToolbarPlaceholder>
			<span class="ms-2">Selected: <code>@_colorHsv</code></span>
		</PDToolbarPlaceholder>
	</PDToolbar>

	<div class="mt-3 p-3 rounded" style="background-color: @_colorHsv; height: 60px;"></div>

	<h3 class="mt-4">HSVA Mode (with Transparency)</h3>

	<PDToolbar>
	<PDColorPicker @bind-Value="_colorHsva"
		Text="HSVA"
		Options="@_hsvaOptions"
		ToolTip="HSV color with alpha" />
		<PDToolbarPlaceholder>
			<span class="ms-2">Selected: <code>@_colorHsva</code></span>
		</PDToolbarPlaceholder>
	</PDToolbar>

	<div class="mt-3 p-3 rounded position-relative" style="height: 60px; background-image: linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%); background-size: 20px 20px; background-position: 0 0, 0 10px, 10px -10px, -10px 0px;">
		<div class="position-absolute" style="inset: 0; background-color: @_colorHsva;"></div>
	</div>

	<h3 class="mt-4">Minimal Mode (Palette Only)</h3>

	<PDToolbar>
	<PDColorPicker @bind-Value="_color6"
		Palette="@ColorPalettes.Extended"
		Options="@_minimalOptions"
		ToolTip="Quick pick from palette" />
		<PDToolbarPlaceholder>
			<span class="ms-2">Selected: <code>@_color6</code></span>
		</PDToolbarPlaceholder>
	</PDToolbar>

	<div class="mt-3 p-3 rounded" style="background-color: @_color6; height: 60px;"></div>

	<h3 class="mt-4">Live Preview vs Confirm</h3>

	<div class="row">
		<div class="col-md-6">
			<h5>Live Preview (Default)</h5>
			<PDToolbar>
			<PDColorPicker @bind-Value="_color7"
					Text="Live"
					Options="@_liveOptions"
					ColorSelected="OnColor7Selected" />
			</PDToolbar>
			<div class="mt-2 p-3 rounded" style="background-color: @_color7; height: 40px;"></div>
			<small class="text-muted">Updates as you pick</small>
		</div>
		<div class="col-md-6">
			<h5>Confirm Required</h5>
			<PDToolbar>
			<PDColorPicker @bind-Value="_color8"
					Text="Confirm"
					Options="@_confirmOptions"
					ColorSelected="OnColor8Selected" />
			</PDToolbar>
			<div class="mt-2 p-3 rounded" style="background-color: @_color8; height: 40px;"></div>
			<small class="text-muted">Only updates on OK</small>
		</div>
	</div>

	<h3 class="mt-4">Event Log</h3>
	<div class="border rounded p-2" style="max-height: 150px; overflow-y: auto;">
		@if (_events.Count == 0)
		{
			<span class="text-muted">No events yet. Pick a color to see events.</span>
		}
		@foreach (var evt in _events.AsEnumerable().Reverse().Take(10))
		{
			<div class="small">@evt</div>
		}
	</div>

</DemoSourceView>
